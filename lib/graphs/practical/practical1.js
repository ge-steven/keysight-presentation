var edgestyle1 = {
  'segment-distances': [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, 
    -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, 
    -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, 
    -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, 
    -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0],
  'segment-weights': [0.18, 0.19, 0.2 , 0.21,
    0.22, 0.23, 0.24, 0.25, 0.26, 0.27, 0.28, 0.29, 0.3 , 0.31, 0.32,
    0.33, 0.34, 0.35, 0.36, 0.37, 0.38, 0.39, 0.4 , 0.41, 0.42, 0.43,
    0.44, 0.45, 0.46, 0.47, 0.48, 0.49, 0.5 , 0.51, 0.52, 0.53, 0.54,
    0.55, 0.56, 0.57, 0.58, 0.59, 0.6 , 0.61, 0.62, 0.63, 0.64, 0.65,
    0.66, 0.67, 0.68, 0.69, 0.7 , 0.71, 0.72, 0.73, 0.74, 0.75, 0.76,
    0.77, 0.78, 0.79, 0.8 , 0.81, 0.82],
  'edge-distances': 'node-position',
  'curve-style': 'segments'
}

var edgestyle2 = { 
  'segment-weights': [0.18, 0.19, 0.2 , 0.21,
    0.22, 0.23, 0.24, 0.25, 0.26, 0.27, 0.28, 0.29, 0.3 , 0.31, 0.32,
    0.33, 0.34, 0.35, 0.36, 0.37, 0.38, 0.39, 0.4 , 0.41, 0.42, 0.43,
    0.44, 0.45, 0.46, 0.47, 0.48, 0.49, 0.5 , 0.51, 0.52, 0.53, 0.54,
    0.55, 0.56, 0.57, 0.58, 0.59, 0.6 , 0.61, 0.62, 0.63, 0.64, 0.65,
    0.66, 0.67, 0.68, 0.69, 0.7 , 0.71, 0.72, 0.73, 0.74, 0.75, 0.76,
    0.77, 0.78, 0.79, 0.8 , 0.81, 0.82],
    'segment-distances': [-17.1, -18.128125, -19.15625, -20.184375000000003, -21.212500000000002, -22.240625, 
    -23.26875, -24.296875, -25.325000000000003, -26.353125, -27.38125, -28.409375, -29.4375, -30.465625000000003, 
    -31.49375, -32.521875, -33.55, -34.578125, -35.60625, -36.634375000000006, -37.6625, -38.690625, -39.71875, -40.746875, 
    -41.775, -42.803125, -43.83125, -44.859375, -45.8875, -46.915625, -47.94375, -48.971875, -50.0, -48.971875, -47.94375, 
    -46.915625, -45.8875, -44.859375, -43.83125, -42.803125, -41.775, -40.746875, -39.71875, -38.690625, -37.6625, -36.634375000000006, 
    -35.60625, -34.578125, -33.55, -32.521875, -31.49375, -30.465625000000003, -29.4375, -28.409375, -27.38125, -26.353125, -25.325000000000003, 
    -24.296875, -23.26875, -22.240625, -21.212500000000002, -20.184375000000003, -19.15625, -18.128125, -17.1
      ],
      'edge-distances': 'node-position',
      'curve-style': 'segments'
}

var edgestyle3 = { 
  'segment-weights': [0.18, 0.19, 0.2 , 0.21,
    0.22, 0.23, 0.24, 0.25, 0.26, 0.27, 0.28, 0.29, 0.3 , 0.31, 0.32,
    0.33, 0.34, 0.35, 0.36, 0.37, 0.38, 0.39, 0.4 , 0.41, 0.42, 0.43,
    0.44, 0.45, 0.46, 0.47, 0.48, 0.49, 0.5 , 0.51, 0.52, 0.53, 0.54,
    0.55, 0.56, 0.57, 0.58, 0.59, 0.6 , 0.61, 0.62, 0.63, 0.64, 0.65,
    0.66, 0.67, 0.68, 0.69, 0.7 , 0.71, 0.72, 0.73, 0.74, 0.75, 0.76,
    0.77, 0.78, 0.79, 0.8 , 0.81, 0.82],
    'segment-distances': [-40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, 
      -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, 
      -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, 
      -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, 
      -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40, -40],
      'edge-distances': 'node-position',
      'curve-style': 'segments'
}

var edgestyle4 = { 
  'segment-weights': [0.18, 0.19, 0.2 , 0.21,
    0.22, 0.23, 0.24, 0.25, 0.26, 0.27, 0.28, 0.29, 0.3 , 0.31, 0.32,
    0.33, 0.34, 0.35, 0.36, 0.37, 0.38, 0.39, 0.4 , 0.41, 0.42, 0.43,
    0.44, 0.45, 0.46, 0.47, 0.48, 0.49, 0.5 , 0.51, 0.52, 0.53, 0.54,
    0.55, 0.56, 0.57, 0.58, 0.59, 0.6 , 0.61, 0.62, 0.63, 0.64, 0.65,
    0.66, 0.67, 0.68, 0.69, 0.7 , 0.71, 0.72, 0.73, 0.74, 0.75, 0.76,
    0.77, 0.78, 0.79, 0.8 , 0.81, 0.82],
    'segment-distances': [-17.1, -17.893652343750002, -18.662109375, -19.405371093750002, -20.1234375, -20.81630859375, -21.483984375000002, 
      -22.12646484375, -22.743750000000002, -23.33583984375, -23.902734375, -24.444433593750002, -24.9609375, 
      -25.452246093750002, -25.918359375, -26.35927734375, -26.775000000000002, -27.16552734375, -27.530859375000002, 
      -27.87099609375, -28.1859375, -28.475683593750002, -28.740234375, -28.979589843750002, -29.19375, -29.38271484375, 
      -29.546484375000002, -29.68505859375, -29.798437500000002, -29.88662109375, -29.949609375, -29.987402343750002, 
      -30.0, -29.987402343750002, -29.949609375, -29.88662109375, -29.798437500000002, -29.68505859375, -29.546484375000002, 
      -29.38271484375, -29.19375, -28.979589843750002, -28.740234375, -28.475683593750002, -28.1859375, -27.87099609375, 
      -27.530859375000002, -27.16552734375, -26.775000000000002, -26.35927734375, -25.918359375, -25.452246093750002, 
      -24.9609375, -24.444433593750002, -23.902734375, -23.33583984375, -22.743750000000002, -22.12646484375, -21.483984375000002, 
      -20.81630859375, -20.1234375, -19.405371093750002, -18.662109375, -17.893652343750002, -17.1],
      'edge-distances': 'node-position',
      'curve-style': 'segments'
}

var practical = function() {

  let practical1 = cytoscape({
    container: document.getElementById('practical1-cy'),
    elements: edge_bend_data.elements,
    style: [
      {
        selector: 'node',
        style: {
          'label': 'data(label)',
          'text-valign': 'center',
          'text-halign': 'center',
          'background-color': 'white',
          'font-family': "Helvetica,Arial,sans-serif",
          'border-width': 4,
          'border-color': 'black',
          'width' : 30,
          'height': 30
        }
      },
      {
        selector: 'edge',
        style: edgestyle1
      },
      {
          selector: 'node.selected',
          style: {
              'background-color': 'green'
          }
      },
      {
          selector: 'node.highlight',
          style: {
              'background-color': 'orange'
          }
      },
      {
          selector: 'node.semitransp',
          style:{ 'opacity': '0.5' }
      },
      {
          selector: 'edge.highlight',
          style: { 'mid-target-arrow-color': '#FFF', lineColor: 'blue' }
      },
      {
          selector: 'edge.semitransp',
          style:{ 'opacity': '0.2' }
      }
    ],
    layout: {
      name: 'preset',
      fit: true,
      positions: function(node){return node._private.data.position}
    }
  });

  practical1.on('mouseover', 'node', function(e){
    var sel = e.target;
    highlight(sel, practical1);
  });
  practical1.on('mouseout', 'node', function(e){
    dehighlight(practical1);
  });

  practical1.on('mouseover', 'edge', function(e){
    var sel = e.target;
    sel.addClass('highlight');
  });
  practical1.on('mouseout', 'edge', function(e){
    var sel = e.target;
    sel.removeClass('highlight');
  });

    return practical1
}


var practical1 = undefined

Reveal.addEventListener('fragmentshown', function(event) {
  if (event.fragment.id === 'practical1') {
      practical1 = practical()
      practical1.resize();
      practical1.fit();
  }
  if (event.fragment.id === 'practical2') {
    var a = practical1.edges().animate({
      style: edgestyle2}, {duration: 500},
      {queue: 1}
      );
      document.getElementById("nrbends").innerHTML = "1 bend";
  }
  if (event.fragment.id === 'practical3') {
    var a = practical1.edges().animate({
      style: edgestyle3}, {duration: 500},
      {queue: 1}
      );
      document.getElementById("nrbends").innerHTML = "2 bends";
  }
  if (event.fragment.id === 'practical4') {
    var a = practical1.edges().animate({
      style: edgestyle4}, {duration: 500},
      {queue: 1}
      );
      document.getElementById("nrbends").innerHTML = "$\\infty$ bends";
      MathJax.Hub.Typeset()
  }
});


Reveal.addEventListener('fragmenthidden', function(event) {
  if (event.fragment.id === 'practical1') {
      practical1.destroy()
  }
  if (event.fragment.id === 'practical2') {
    var a = practical1.edges().animate({
      style: edgestyle1}, {duration: 500},
      {queue: 1}
      );
      document.getElementById("nrbends").innerHTML = "0 bends";
  }
  if (event.fragment.id === 'practical3') {
    var a = practical1.edges().animate({
      style: edgestyle2}, {duration: 500},
      {queue: 1}
      );
      document.getElementById("nrbends").innerHTML = "1 bend";
  }
  if (event.fragment.id === 'practical4') {
    var a = practical1.edges().animate({
      style: edgestyle3}, {duration: 500},
      {queue: 1}
      );
      document.getElementById("nrbends").innerHTML = "2 bends";
  }
});